/**
 * webStorage - A minimal Javascript wrapper to work with Web Storage
 * @version v1.0.0
 * @author George Raptis <georapbox@gmail.com> (http://georap.gr)
 * @homepage https://github.com/georapbox/webStorage#readme
 * @repository git+https://github.com/georapbox/webStorage.git
 */
!function(t,e,r){"use strict";"function"==typeof define&&define.amd?define(r):"undefined"!=typeof module&&module.exports?module.exports=r():e[t]=r()}("webStorage",this,function(){"use strict";function t(t,e){return t.substr(0,e.length)===e}function e(t){return String.prototype.trim?t.trim():t.replace(/(^\s*|\s*$)/g,"")}function r(t,e){return 0===t.indexOf(e)?t.slice(e.length):t}function n(){for(var t=1,e=arguments.length;e>t;t++)for(var r in arguments[t])arguments[t].hasOwnProperty(r)&&(arguments[t][r]&&arguments[t][r].constructor&&arguments[t][r].constructor===Object?(arguments[0][r]=arguments[0][r]||{},n(arguments[0][r],arguments[t][r])):arguments[0][r]=arguments[t][r]);return arguments[0]}function o(t){var e="storage.dummy";try{return t.setItem(e,e),t.removeItem(e),!0}catch(r){return!1}}function i(t){return t.options.name+"/"}function s(e,r){return t(r,e.storeKeyPrefix)}function u(t,e){var r,n=t.options.driver,o=0;for(r in n)if(n.hasOwnProperty(r)&&s(t,r)&&e(r,n[r],++o)===!1)return!1}function a(t){if(t=n({},c,t),!o(t.driver))throw new Error("Web Storage is not supported by your browser.");if(null==t.name||""===e(t.name))throw"You must use a valid name for the database.";this.options=t,this.storeKeyPrefix=i(this)}var f,c={driver:localStorage,name:"webStorage"};return f=a.prototype,f.createInstance=function(t){return new a(t)},f.config=function(t){if(t=n({},c,t),null==t.name||""===e(t.name))throw"You must use a valid name for the database.";this.options=t,this.storeKeyPrefix=i(this)},f.getItem=function(t){var e=this.options.driver.getItem(this.storeKeyPrefix+t);try{return JSON.parse(e)}catch(r){throw r}},f.setItem=function(t,e){var r=this;try{return e=null==e?null:e,t=r.storeKeyPrefix+t,r.options.driver.setItem(t,JSON.stringify(e)),e}catch(n){throw"QuotaExceededError"===n.name||"NS_ERROR_DOM_QUOTA_REACHED"===n.name?new Error("Could not save item due to quota exceed."):n}},f.removeItem=function(t){this.options.driver.removeItem(this.storeKeyPrefix+t)},f.clear=function(t){var e=this.options.driver;t===!0?e.clear():u(this,function(t){e.removeItem(t)})},f.keys=function(){var t=[],e=this.storeKeyPrefix;return u(this,function(n){t.push(r(n,e))}),t},f.length=function(){var t=0;return u(this,function(){t+=1}),t},f.iterate=function(t){var e=this.storeKeyPrefix;u(this,function(n,o,i){return t&&t(r(n,e),JSON.parse(o),i)===!1?!1:void 0})},f.quota=function(){var t,e={},r=0;return u(this,function(n,o){t=2*o.length/1024/1024,r+=t,e[n]=t}),{total:r,items:e}},f.supported=function(){return o(this.options.driver)},new a});